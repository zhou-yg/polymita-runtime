/**
 * @tips: this file is generated by @polymita. do not modified this file
 */
import * as React from 'react'
import * as ReactDOM from 'react-dom/client'
import {
  RouterProvider,
  createBrowserRouter,
  createHashRouter,
} from "react-router-dom"

import {
  getConfig, createModulesContext, getModulesContext,
  getDynamicRoutes, mergeDynamicRoutesToTree,
  getDynamicModelIndexes,
  createApiPlugin,
  ConnectProvider,
} from '@polymita/next-connect'

<%- imports %>


function RootApplication({
  location
}) {
  const routes = [
    <%- routes %>
  ];
  const dynamicRoutes = getDynamicRoutes()
  if (dynamicRoutes.length) {
    routes.push(...mergeDynamicRoutesToTree(dynamicRoutes))
  }
  console.log('[RootApplication] routes: ', routes);
  const router = createBrowserRouter(routes)



  return (
    <ConnectProvider
      modelIndexes={getDynamicModelIndexes()}
      plugin={createApiPlugin()}
    >
      <RouterProvider router={router} />
    </ConnectProvider>
  );
}

render(RootApplication)

function render (f) {
  let ele = React.createElement(f)
  const app = ReactDOM.createRoot(document.getElementById('app'))
  app.render(ele)
}
